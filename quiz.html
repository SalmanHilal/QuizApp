<!DOCTYPE html>
<html>
<head>
	<title>Quiz | Quiz App</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-database.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<style>
	.options-box .option {
		background-color: #cccccc;
		padding: 13px 15px;
		font-size: 16px;
		line-height: 22px;
		color: #000000;
		border-radius: 5px;
		margin-bottom: 10px;
		cursor: pointer;
		text-transform: capitalize;
		animation: fadeIn 0.3s ease forwards;
		position: relative;
		overflow: hidden;
	}
	.quiz-box{
		display: none;
	}
	.quiz-box.current{
		display: block;
	}
	</style>
 
	<script>
	var firebaseConfig = {
		apiKey: "AIzaSyBX9_yYquGUfFFPhay1XYWM21aVl9jM9Yk",
		authDomain: "onestop-realdata.firebaseapp.com",
		databaseURL: "https://onestop-realdata.firebaseio.com",
		projectId: "onestop-realdata",
		storageBucket: "onestop-realdata.appspot.com",
		messagingSenderId: "425723882258",
		appId: "1:425723882258:web:0af2b59e5e117a30b6e1cb"
	};
	firebase.initializeApp(firebaseConfig);
	firebase.auth().onAuthStateChanged(function (user) {
		if (user) {
			if (user['displayName'] == 'teacher') {
				window.location.replace("dashboard.html");
			}
		} else {
			window.location.replace("signin.html");
		}
	});
	</script>
</head>
<body>


<div class="container py-5">
	<div class="row">
		<div class="col-sm-12 col-md-10 mx-auto" id="quizContainer">
			<div class="card shadow p-3 mb-5 border-0 bg-white rounded text-center py-5">
				<button class="btn btn-default" disabled>
					<span class="spinner-grow spinner-grow-sm"></span>
					Loading..
				</button>
			</div>
		</div>
	</div>

</div>


<script>
$(document).ready(function () {
	var id = new URL(window.location.href).searchParams.get("id");
	var show_Data = '',counter=1;
	var ref = firebase.database().ref();
	ref.once("value", function (snapshot) {
		if (snapshot.val() != null) {
			quizzes = snapshot.val()['Quizzes'];
			if (quizzes) {
				for (var key in quizzes) {
					for (item in quizzes[key]) {
						if(item == id){
							show_Data += '<div class="card shadow p-4 mb-5 border-0 bg-white rounded">';
							for(i in quizzes[key][item]){
								if(i != 'email' && i != 'key' && i != 'name'){
									show_Data += '<div id="q' + counter +'" class="quiz-box '+(counter==1?'current':'')+'"><h5>Question ' + counter + ' of 5</h5>';
									show_Data += '<div class="h3 my-3 font-weight-normal">'+ quizzes[key][item][i]['question'] +'</div>';
									show_Data += '<div class="options-box">';
									show_Data += '<div class="h4 font-weight-normal option option1">' + quizzes[key][item][i]['option1'] + '</div>';
									show_Data += '<div class="h4 font-weight-normal option option3">' + quizzes[key][item][i]['option3'] + '</div>';
									show_Data += '<div class="h4 font-weight-normal option option4">' + quizzes[key][item][i]['option4'] + '</div>';
									show_Data += '<div class="h4 font-weight-normal option option2">' + quizzes[key][item][i]['option2'] + '</div></div></div>';
									counter++;
								} 
							}
							show_Data += '</div>';	
						}
					}
				}
			} else {
				show_Data = 'No records found!'
			}
		} else {
			show_Data = 'No records found!'
		}
		$('#quizContainer').html(show_Data);
	}, function (error) {
		console.log("Error: " + error.code);
	});
});
$(document).on("click", '.quiz-box .option', function (e) {
	currentQuizID = $(this).parent().parent().attr('id').replace('q', '');
	if(currentQuizID != 5){
		$('.quiz-box').removeClass('current');
		$(this).parent().parent().next().addClass('current');
	}else{
		alert('result')
	}

});
</script>
</body>
</html>